#! /bin/sh
# $Id$
# Check that all the files listed in stdin are checked in under SCCS.
# All the files should be on one line in stdin.

tmpfile=/tmp/checksccs.$$

awk ' {filelist=$0}
	END { nf=split(sccsfiles,s," ")
		for(i=1;i<=nf;i++) {
			sccsfiles[s[i]]=s[i]
		}
		nf=split(filelist,f," ")
		for(i=1;i<=nf;i++) {
			if (sccsfiles[f[i]] != f[i]) {
				print f[i]
			}
		}
	}' sccsfiles="`echo SCCS/s.* | sed 's=SCCS/s.==g'`" - > $tmpfile

errfiles=`cat $tmpfile`
rm -f $tmpfile

printedheader=0

for errfile in $errfiles
do
	if [ ! -d $errfile ]; then
		if [ $printedheader != 1 ]; then
			printedheader=1
			echo -n "The following files are not in SCCS: "
		fi
		echo -n " $errfile"
	fi
done
if [ $printedheader = 1 ]; then
	echo ""
	exit 1
fi
