.\" $Id$
.H1 "Installation"
.pp
\*(PT is a large software system that relies on a properly configured
software environment.  There are many things that can go wrong
in getting \*(PT running.  For instance, the windowing system may
not be the same one we use, or it may be used in a different way.
There is also some configuration required by each user in order to
use the graphical interface.  The information for doing this
is given in the Pigi document, section 2 of the Almagest.
Here we give the basic information required to get from a distribution
tape to being able to run the system.
.H2 "Basic \*(PT installation"
.pp
First note that the
approximate disk space requirements are (for the Sun-4 distribution;
other distributions are roughly the same size):
.(b
	\*(PT: 40 Mbytes
	\*(PT (after you optionally remake): 57 Mbytes
	Gnu subset: 7 Mbytes
.)b
Steps to install \*(PT on a Sun-3 or Sun-4:
.ip 1.
Create a user ``ptolemy'', together with a home directory for the ``ptolemy''
user.
.ip 2.
Log in or su to user ``ptolemy''.
.ip 3.
Change your current directory to the
.i parent
of the ``ptolemy'' home directory (e.g. "cd ~ptolemy/..").
.ip 4.
Load the tape in your drive.
.ip 5.
mt -f /dev/nrst8 rewind
(This rewinds the tape -- change the device name if your tape drive
has a different name.)
.ip 6.
tar xf /dev/nrst8 
(This reads the tape, and will take a while.)
.ip 7.
Create a symbolic link so that ``/usr/users/ptolemy'' points to ~ptolemy
(optional \- as an alternative, you can change the definition of the
PTOLEMY variable in the makefiles in ~ptolemy/src/example and
in ~ptolemy/src/pigiExample).
.ip 8.
Edit ~ptolemy/.rhosts, adding a line for your system
(This gives pigi permission to create an RPC server process with the
.i rsh
command ).
The added line will be of the form "hostname ptolemy", you can
find the correct hostname with the command "hostname".
.H2 "Installation on a VaxStation or a DecStation"
.pp
For a VaxStation or DecStation, the procedure is exactly as above,
except that the device names to use are different.
.H2 "Special considerations for installation under Open Windows"
.pp
\*(PT was developed using the X11R4 distribution from MIT.  It will
run successfully under Open Windows version 2.  There are problems
with running the graphic interface with Open Windows version 3,
unfortunately; we have not yet determined whether the problem is
a bug in the version 3
.i olwm
(Open Look window manager)
or in the Vem editor.  One workaround is to use the
.i twm
window manager from the MIT distribution instead of
.i olwm ;
while not as pretty as
.i olwm ,
at least it works.
.pp
In order for all utilities included with this distribution to work
under Open Windows (either version), you must install the Athena
widgets (the freely redistributable widget set from the X11R4 distribution),
which are provided with this distribution under the ``~ptolemy/athena.sunX'' 
directory, where the X may be a 3 or 4 depending
on your machine type.  To install them, become root
and copy all files in that directory into ``/usr/openwin/lib'' (or, if
.EQ
delim ##
.EN
you have installed Open Windows in a non-standard place, into ``$OPENWINHOME/lib'').
.EQ
delim $$
.EN
.pp
After installation, the ptolemy account will contain several scripts for
starting up X11R4 (Xrun), Open Windows with
.i olwm
(Xrun.ow),
or Open Windows with
.i twm
(Xrun.ow.twm).
.H2 "GNU Installation"
.pp
For convenience, some software from the Free Software Foundation is
included on the distribution tape.  This includes the compiler
used to make \*(PT, which is also the compiler you will use to extend
\*(PT.  Note that this is not a complete set of Gnu software.
.ip 1.
cd /usr
.ip 2.
mkdir gnu (Unless there is such a directory there, in which case, you
probably don't want to load the version from this tape).
.ip 3.
If you just installed Ptolemy from tape and used the
"tar xf /dev/nrst8" command as specified in Step 6 of
the installation procedures above, your tape should already
be positioned at the gnu software subset, so go on to the next
step.
Otherwise, type the following command to skip over the
Ptolemy portion of the tape:
.br
mt -f /dev/nrst8 fsf 1
.ip 4.
tar xf /dev/rst8
.H2 "Testing the Installation
.pp
To test \*(PT:
.ip 1.
login as ptolemy
.ip 2.
If the X server is not already running, the .login script will attempt
to start it.  If your installation is different from ours, you may
need to modify .login to work at your site (in particular, you may
need a different
.i path
variable).
.ip 3.
cd demo
.ip 4.
pigi
.ip 5.
Follow instructions in section 2 of the Almagest 
titled, ``Running the Ptolemy Demos'' (section 2.3.1).
.pp
Note that the ptolemy user provides a model of a user properly
configured to run ptolemy.  All the .files in the home directory
are set up according to the tastes of the \*(PT authors,
and according the standard use of windowing software in the \*(PT
development group.
.H2 "Troubleshooting"
.pp
If when you start pigi you get the message "permission denied"
and the \*(PT greeting window fails to pop up, then Vem was
unable to start pigiRpc, the associated \*(PT process.
This process is started using the Unix "rsh" command.
This command can fail if your workstation does not have
networking enabled, or the user's .rhosts file does not include
the name of the workstation on which you are running.
The following simple test checks your networking and .rhosts configuration:
.(c
	rsh name echo "hello world"
.)c
where "name" is the name of your workstation.  If you get back
"hello world", then your workstation networking is correct.
If you get the "permission denied" message again,
then either your .rhosts is incorrect or networking is turned off
on your workstation.
If the latter is the problem,
please ask your system administrator to enable networking.
.pp
If you succeed in invoking pigi, but graphs do not appear, but messages
saying that the xgraph program could not be found appear instead,
your path is set incorrectly.  Because pigi uses
.i rsh 
to start up \*(PT, your path
must be defined in your .cshrc file, not just in your .login file.
The path must be defined even when ``prompt'' is not set, since
your .cshrc file will be read in non-interactive mode.

