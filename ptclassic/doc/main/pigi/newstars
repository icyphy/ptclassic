.\" $Id$
.H1 "Defining New Stars"
.pp
Only the most casual user will get by with the stars provided
in the Ptolemy palettes.
New stars are defined using the \*(PT preprocessor language,
which is described in its section in the manual.
At present, Pigi must be remade to install new stars.
There is no dynamic linking.
.sp
(EXPLAIN HOW THE CASUAL USER SHOULD DO THIS)
.sp
.pp
Once you have Pigi running with the new star installed, it is a simple
matter to create an icon for it an use it.
The Pigi command ``Extend:make-star'' (with accelerator ``*'')
creates the icon.
A dialog box will query you for the name of the star
and the location of its source code.
Please note that Pigi requires the location be specified 
relative to your or some other user's home directory.
For instance, if your login name is ``joe'', and the star
is defined in ~joe/ptolemy/mystar.pl, then the src
directory is ~joe/ptolemy.
The master copy of the star icon to be generated by the make-star
command is stored in a directory determined by Pigi based on the 
following rule:  if the star source directory ends in "../stars" and
there exists a "../icons" directory, then put the icon in that "../icons"
directory.  Otherwise, just put the icon in the same star source directory.
It is the user's responsibility to make sure the star source code is 
indeed in the star source directory he/she enters into the dialog box.
Otherwise, Pigi will not be able to locate the star source code when
executing the look-inside command.  The way Pigi does a look-inside on
a star icon is based on a similar rule:  if the directory where the master
copy of the star icon is stored ends in "../icons" then Pigi looks for 
the star source code in the "../stars" directory, otherwise it looks for
the source code in the same directory.
.pp
Pigi will next query for the name of a palette into which
to store (an instance of) the icon.
If the palette does not already exist, it will be created.
The dialog box suggests using the palette ``./user.pal'', simply
because this is easy to access via the \fIopen-palette\fR (``O'') command.
Note that you can have many palettes named ``user.pal''; the one opened
by the \fIopen-palette\fR command is the one in the directory where
you started Pigi.
.pp
After the icon has been created, you can use it immediately.  The icon
that Pigi generates has a generic star symbol in it.  You can change
this symbol if you want;
see the section below on editing icons.
.pp
An important note: whenever the definition of a star is changed so that
the new definition has different I/O ports, the icon must be updated as
well.  You can do this by calling \fImake-star\fP again to replace
the old icon with a new one.  Furthermore, whenever you update the
formal parameters of a star or create a new icon for a star, you must
also re-instantiate the icon in all facets that refer to it.  This
insures that data will be consistent.
