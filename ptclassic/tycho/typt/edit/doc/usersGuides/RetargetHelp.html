<!-- $Id$ -->
<html>
<head>
<Title>User's Guide to the Ptolemy Retargetting Editor</title>
</head>
<body bgcolor="#faf0e6">

<h1><a name="Ptolemy Retargetting editor">User's Guide to the Ptolemy
Retargetting Editor</a></h1>

<p>

This class provides a graphical editor that can be used to retarget
Ptolemy universes.  To use this editor, you must be running a binary that 
has Ptolemy built in.  To start Tycho with Ptolemy, see
<A HREF="../../../../doc/tyunix.html#Ptolemy with Tycho">Executing Tycho with Ptolemy</A>
in the Tycho under Unix guide.

<P> Ptolemy is a software environment that provides simulation an code
generation capabilities.  <A
HREF="http://ptolemy.eecs.berkeley.edu">http://ptolemy.eecs.berkeley.edu</A>
describes the Ptolemy project in detail, but briefly, a Ptolemy
program is called a <I>Universe</I> which consists of multiple
functional blocks, (such as adders etc.) named <I>Stars</I>.
Different models of computation are called Ptolemy <I>Domains</I>.
This editor is used to retarget Universes between different domains.
For example, there is the CG56 domain that generates code for the
Motorola 56k processor and there is a domain for the Texas Instruments
C50 domain.  This editor can be used to retarget a universe that was
written in the CG56 domain to the C50 domain.  The retargetting editor
can also be used to compare the stars in two different domains.

<h2><a name="Ptolemy Retargetting editor tutorial">Ptolemy Retargetting
editor tutorial</a></h2>

The Retargetting editor can be started up from a <A HREF="../../../../editors/textedit/doc/usersGuides/EditPtclHelp.html">ptcl editor</A>.

The <CODE>Special</CODE> menu button in the ptcl editor contains the
<CODE>Retarget</CODE> menu choice which brings up the retargetting editor.

<H3>Retargetting Buttons</H3>
<MENU>
<LI> Compare Domains: This button compares the stars in the two current domains and displays the different categories of conflict.

<LI> Change Domain A: This button brings up a set of radio buttons
that allow the user to change the domain.  Usually domain A is the
domain we are retargetting from.  If the retargetting editor was
started from a Ptcl editor, then Domain A defaults to the domain of
the Universe.  Only the domains that are present in the
<CODE>tysh</CODE> binary are listed.

<LI> Change Domain B: This button brings up a set of radio buttons
that prompt the user for the name of the domain.  Usually domain B is
the domain we are retargetting to.

<LI> Check Universe: This button asks the ptcl editor for a list of
all the stars in it and then checks the stars against the different
types of conflicts.

</MENU>

The bottom of the retargetting window contains a serious of counters
that display the number of stars in the different categories.  If you
move the mouse over these counters, then the status window should
provide a brief description of the counter.

<H3>A short example</H3>

<OL>
<LI> Start up <CODE>tycho -pigi</CODE>.  The <CODE>-pigi</CODE> option
means that tycho uses a binary that knows about the Ptolemy stars.

<LI> Open the file
<A HREF="$PTOLEMY/tycho/typt/lib/PtolemyFacets.fst"><CODE>$PTOLEMY/tycho/typt/lib/PtolemyFacets.fst</CODE></A>.
<CODE>PtolemyFacets.fst</CODE> contains a forest that describes all
the different universes in the Ptolemy tree.  A graphical window that
displays the forest should come up.

<LI> Scroll the forest window until the <A
HREF="$PTOLEMY/src/domains/cgc/demo/sound"><CODE>$PTOLEMY/src/domains/cgc/demo/sound</CODE></A>
node is visible and then double click on the node. A graphical editor
that lists the stars in the sound universe will come up.

<LI> Under the <CODE>Special</CODE>menu button of the sound Palette, select
<CODE>Show Ptcl</CODE>. A ptcl editor
window should come up that contains a textual description of the
<I>sound</I> universe.

<LI>  Under the <CODE>Special</CODE> menu button in the ptcl editor, select
the <CODE>Retarget</CODE> choice and the retarget editor should come up.

<LI> In the Retargetting editor, hit the <CODE>Change Domain B</CODE>
button and change the domain to C50.  We are going to attempt to
retarget the domain from CGC to the Texas Instruments C50 domain.

<LI> In the Retargetting editor, mouse on the <CODE>Check Universe</CODE>
button.  After a brief wait, the Retargetting editor will display the
names of the stars in sound demo, and the conflicts between the CGC and the
C50 domain.  You can double click on a star name which will bring up a window
that compares the two stars in the different domains.

<LI> To compare all the stars in the CGC and C50 domains, mouse on the 
<CODE>Compare Domains</CODE> button.
</OL>



<h2><a name="Ptolemy Retargetting editor bugs">Ptolemy Retargetting
editor bugs</a></h2>

<menu>

<li> Currently, while the tool is comparing domains, no status messages
come up until after the compare is done. Perhaps we need an update or a
flush here.

<li> If the user is attempting to retarget a multi domain universe,
then things could get a little confusing. Currently, the tool throws
away the domain information of the stars in the ptcl file and just
compares star names.

<li> There is no easy way to call the Retargetting editor from within
Ptolemy.  The problem is that if Ptolemy is present, and you open a
facet from within Tycho, then the facet is passed to vem.  What we
need is some easy way to convert a facet to ptcl.

</menu>

<p>
<a href="../../../../doc/index.html">Tycho Home Page</a><br>
<p>
<HR>
Copyright &#169 1996-%Q%, The Regents of the University of California.
All rights reserved.
<br>
Last updated: $Date$,
comments to: <author>cxh@eecs.berkeley.edu</author>
</body>
</html>
