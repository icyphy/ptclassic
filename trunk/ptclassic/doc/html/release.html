<!-- @(#)release.html	1.2 04/23/98  -->
<html>
<head>
<title>Ptolemy 0.7.1p2 Release Notes</title>
</head>
<body bgcolor="#faf0e6">
<h1>Ptolemy 0.7.1 Release Notes</h1>

<menu>
<li> <a href="index.html">Main Ptolemy 0.7.1 Page</a>

<li> <a href="http://ptolemy.eecs.berkeley.edu/pt0.7.1/ptolemy0.7.1/html/"><CODE>http://ptolemy.eecs.berkeley.edu/pt0.7.1/ptolemy0.7.1/html/</CODE></a>
contains a list of bugs and other issues found after the release.

</menu>

<h2>Release notes</h2>
Below are some common problems that you might run across with 0.7.1.

<menu>
<li> <a href="#compatibility">0.7 and 0.7.1 Compatbility</a>
<li> <a href="#egcs">EGCS and GCC-2.8</a>
<li> <a href="#pxgraph">Pxgraph</a>
<li> <a href="#vem">Vem</a>
</menu>

<h3><a name="compatibility">0.7 and 0.7.1 Compatibility</a></h3>
<menu>
<li> A Ptolemy 0.7 vem will not work with a Ptolemy 0.7.1 pigiRpc.

<li> In theory, the Itcl2.2 binaries from Ptolemy 0.7 should work
with Ptolemy 0.7.1.  However, if you are upgrading the compiler,
you should probably recompile Itcl.

<li> In general, <CODE>.o</CODE> files built under Ptolemy 0.7
will need to be recompiled for use with Ptolemy 0.7.1
</menu>

<h3><a name="egcs">EGCS and GCC-2.8</a></h3>

Ptolemy 0.7.1 should compile with gcc-2.7.2.2, but the default
compiler we build the binaries with is egcs-1.0.2.  egcs is a new
compiler effort that builds on the gcc compiler.  The egcs sources are
made available to the gcc maintainers, so egcs changes eventually
should be in egcs.  It seems like egcs is much more active than gcc,
and that egcs-1.0.2 is more stable than gcc-2.8.2.  Under gcc-2.8.2,
compiling with -O -fPIC causes an internal compiler error when
compiling <CODE>Block.cc</CODE>, so we are shipping with egcs.

 <p>For more information about egcs, see
<A HREF="http://www.cygnus.com/egcs/"><CODE>http://www.cygnus.com</CODE></A>.

 <p> EGCS has a few mailing lists, <CODE>egcs-bugs</CODE> is
archived at:
<a href="http://www.findmail.com/listsaver/egcs-bugs"><CODE>http://www.findmail.com/listsaver/egcs-bugs</CODE></a>

 <p>The most common problem with using egcs is that
<CODE>libg++</CODE> is no longer used, so certain include files, such
as <CODE>std.h</CODE> are not found at compile time 
and certain symbols, such as
<CODE>ACG::ACG(unsigned int, int)</CODE> are missing at link time.
 <p>Usually, doing a <CODE>make clean; make install</CODE> 
will solve the problem. 
 <p>The way we work around this is by defining <CODE>-DPT_EGCS</CODE>
in <CODE>config-egcs.mk</CODE> and then including that makefile
in the <CODE>config-<I>$PTARCH</I>.mk</CODE> file instead of
<CODE>config-g++.mk</CODE>.

 <p>Note that egcs does not need <CODE>libg++</CODE>, so the
<CODE>SYSLIBS</CODE> makefile variable is set to not include
<CODE>-lg++</CODE>

<h3><a name="pxgraph">Pxgraph</a></h3>
Pxgraph has been converted to Java.  See
the troubleshooting guide at.
<a href="http://ptolemy.eecs.berkeley.edu/java/ptplot/doc/internals/troubleshooting.html"><CODE>$PTOLEMY/tycho/java/ptplot/doc/internals/troubleshooting.html</CODE></a>

If you don't have Java, see
<a href="ftp://ptolemy.eecs.berkeley.edu/pub/misc/xgraph/index.html"><CODE>ftp://ptolemy.eecs.berkeley.edu/pub/misc/xgraph/index.html</CODE></a>
for pxgraph X11 binaries and sources.  See
<a href="pxgraph.README.txt"><CODE>$PTOLEMY/src/pxgraph/README.txt</CODE></a> for details

 <p>To run the Java version of pxgraph, you must do one of the following:
<ol>
<li> Set the <CODE>JAVAHOME</CODE> environment variable to point
to the directory where the Java Development Kit is installed.
For example, your <CODE>.cshrc</CODE> might contain
<pre>
setenv JAVAHOME /opt/jdk1.1.5
</pre>

<li> If you do not set <CODE>JAVAHOME</CODE>, then the pxgraph
script will search your path for the <CODE>javac</CODE> binary.
If <CODE>javac</CODE> is found, then the directory above it
is used for the value of <CODE>JAVAHOME</CODE>

<li> You can also edit <CODE>$PTOLEMY/bin/pxgraph</CODE> directly
and adjust the <CODE>JAVADEFAULT</CODE> variable.
</ol>


<h3><a name="vem">Vem</a></h3>
The <CODE>vem</CODE> binary shipped with Ptolemy 0.7 <B>will not</B>
work with Ptolemy 0.7.1.  The reason is that Tom Lane fixed a long
standing vem bug that occured when pigiRpc and vem try to send
each other commands at the same time.  For example, the bug appears
when the user does a 'edit paramters' or 'look inside' in a vem window
while pigiRpc is compiling a facet.
 <p>If you do not upgrade vem to the version shipped with 0.7.1,
then the error message you will see is:
<pre>
    vem> illegal VEM function number (4)
        RPC Error: server: bad VEM request
</pre>
The number '4' in the error message is a dead giveaway, the patch
says <CODE>rcpInternal.h</CODE> had the following <CODE>#define</CODE>
added:
<pre>
#define VEM_LOCKING_FUNCTION                    (long) 4
</pre>
If you get this error message, get the <CODE>other.src</CODE> tar file
and octtools.

<p>
<hr>
<address>
Last updated 04/23/98,
Send comments to <a href="mailto:www@ptolemy.eecs.berkeley.edu">
www@ptolemy.eecs.berkeley.edu</a>.
</address>
</body>
</html>
