-*-Mode:text-*- -[Sun Dec 31 15:07:13 1995 by cxh]-
Version: $Id$

src/gnu/README

This directory tree contains the source to GNU software necessary to
build Ptolemy from scratch. 

Note that the binary Ptolemy distributions include the GNU binaries
produced by the sources in this directory.  You need not reinstall the
GNU binaries from this directory if you already have the Ptolemy
binary distribution.

If you plan on doing dynamic linking with the prebuilt binary
distribution, you will need to have gcc available.

Note that the tcl/tk source is elsewhere.

This directory contains the following GNU tools
	gcc-2.7.2
	libg++-2.7.1
	make-3.74

If you obtained the hp GNU tar file, then you should also have:
	binutils-2.6
	bison-1.24
	flex-2.5.2

makeinfo, the GNU documentation program is not currently part of the
Ptolemy GNU binary distribution.

makeinfo is part of the texinfo package.  texinfo is available via
anonymous ftp at ftp.uu.net in packages/gnu.

Versions
--------
	Ptolemy is particularly sensitive to the version of libg++.
	Versions earlier than libg++-2.5.2 may work, but your are own
	your own.  

	libg++-2.5.2 has a bug showed up in the sun4.opt build when we
	compiled pigiRpc with the -O option.  The problem was an
	unknown symbol __vt$7istream$3ios during link time.  This
	symbol comes from kernel/Tokenizer.cc.  Other than that, we
	use libg++-2.5.2 on site for about a month with no problem.
	For the 0.5 release, we upgraded to libg++-2.5.3.

	The 0.5.2 release was under gcc-2.6.3

	Ptolemy is not very sensitive to the version of GNU make.  Any
	recent version of GNU make should work.  

GNU make
--------

	You must use GNU make to compile Ptolemy, there are GNU make
	extensions in some of the makefiles.

	The 'clean' rules in the following makefiles cause problems with
	SunOS4.1.3 make:
		mk/common.mk, src/vem/vem/makefile

	The 'all' rule in the following makefile causes problems with
	SunOS4.1.3 make:
		 src/vem/vem-bin.mk

	src/domains/cg56/targets/makefile and mk/stars.mk contain a
	makefile conditional dependent on S56DIR.  GNU make has
	makefile conditionals, Sun make does not.

	src/vem/vem/makefile depends on the $(@D) and $(@F) GNU make
	directives. 

	mk/common.mk, mk/config-sol2.mk and mk/config-sol2.cfront.mk
	all have a makefile conditional that checks the value of
	$(USE_SHARED_LIBS).
	
HP
--
	gcc-2.7.2 needs the GNU assembler, gas, for the gcc -g option.
	See gcc/INSTALL for details.

gcc and Purify
--------------
	To use Purelink and Purify from Pure Inc, be sure to build gcc
	with out the GNU assembler, gas.  Also, be sure to use
	ld-collect rather than GNU ld.  In this directory, we
	configure gcc to not use gas and not to use GNU ld.  



See Also
--------
	$PTOLEMY/src/vem/README		- Contains discussion about
					vem and gcc
