#!/bin/sh
# $Id$
# Script to generate test makefiles for each domain
# Copyright (c) 1995-%Q% The Regents of the University of California.
#                       All Rights Reserved.
#		       
# Programmer:  Christopher Hylands

# Usage:
#	genamakefiletst domain
if [ $# -ne 1 ]; then
	echo " Usage: genmakefiletst domain"
	exit 7
fi
domain=$1
cat <<EoF
# Ptolemy test bed makefile for a domain
# $Id$
# Copyright (c) 1990-1995 The Regents of the University of California.
# All rights reserved.
# 
# Permission is hereby granted, without written agreement and without
# license or royalty fees, to use, copy, modify, and distribute this
# software and its documentation for any purpose, provided that the above
# copyright notice and the following two paragraphs appear in all copies
# of this software.
# 
# IN NO EVENT SHALL THE UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY 
# FOR DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES 
# ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF 
# THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE POSSIBILITY OF 
# SUCH DAMAGE.
# 
# THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY WARRANTIES,
# INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
# MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE SOFTWARE
# PROVIDED HEREUNDER IS ON AN "AS IS" BASIS, AND THE UNIVERSITY OF
# CALIFORNIA HAS NO OBLIGATION TO PROVIDE MAINTENANCE, SUPPORT, UPDATES,
# ENHANCEMENTS, OR MODIFICATIONS.
#
# Automatically generated by genmakefiletst, but you will want
# to adjust DEMO, BAD_DEMO and TESTBED_STARS by hand
#
VPATH= ../../../src/domains/$domain/demo:../../../src/tst/$domain

TST_DOMAIN=../../../src/tst/$domain
# Makefile with implicit rules
include ../makefile.tst

DOMAIN = $(SRC)/domains/$domain
DEMO = $(DOMAIN)/demo
DEMOS = \\
EoF

fulldemos=`ls -d $PTOLEMY/src/domains/$domain/demo/*.pal`
for fulldemo in $fulldemos
do
	demo=`basename $fulldemo`
	echo "	\$(DEMO)/$demo \\"
done
echo ""
echo "BAD_DEMOS ="
echo "DEMOS_PT = \\"

fulldemos=`ls -d $PTOLEMY/src/domains/$domain/demo/*.pal`
for fulldemo in $fulldemos
do
	demo=`basename $fulldemo .pal`
	echo "	$demo.pt \\"
done
cat << EoF

DEMOS_POUT = \$(DEMOS_PT:.pt=.pout)
TESTBED_STARS =
TST_PREAMBLE = ${domain}_preamble.pt

# Makefile with rules
include ../makefile.tst2
EoF
