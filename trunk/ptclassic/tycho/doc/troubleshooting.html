<!-- $Id$ -->
<html>
<head>
<title>Troubleshooting Tycho</title>
</head>
<body bgcolor="#faf0e6">
<h1><img src="../kernel/img/trouble.gif" alt="Trouble Logo">
<a name="Troubleshooting Tycho">Troubleshooting Tycho</a></h1>
<p>
Other sources of information:
<MENU>
<LI> <A HREF="help.html">Tycho Help System Overview </A>
<LI> <A HREF="releasenotes0.2.1.html">Tycho 0.2.1 Release Notes</A>
<LI> <A HREF="bugs.html">Tycho Bugs</A>
<LI> <A HREF="tychoFaq.html">Tycho Frequently Asked Questions (FAQ)</A>
<LI> <A HREF="itcllinks.html">Tcl and Itcl Internet Resources</A>
</MENU>


Below is a list of common problems that people have with Tycho.

<H2><A NAME="Problems Starting Tycho">Problems Starting Tycho</A></H2>

<H3><A NAME="itcl versions">Itcl Versions</A></H3>
Note that Tycho0.2 will <B>not</B> work with Itcl2.0 or Itcl2.1, you must have
Itcl2.2.  (Itcl2.0 was shipped with Ptolemy0.6, Itcl2.2 was shipped with
with Ptolemy0.7)

<H3><A NAME="libitk error messages"></A></H3>
If Tycho fails to start with a message like:
<PRE>
cxh@kahn > tycho
ld.so.1: itkwish: fatal: libitk2.2.so: can't open file: errno=2
Killed
cxh@kahn
</PRE>

then the problem is that the <CODE>itkwish</CODE> binary cannot find
its shared libraries.  If you are using prebuilt Itcl binaries, be
sure that your path is setup so <CODE>$TYCHO/bin</CODE> is before
directory that contains the <CODE>itkwish</CODE> binary. 
 <P>
For example, under C shell:
<PRE>
set path = ($TYCHO/bin $path)
</PRE>
If you are using the prebuilt Itcl binaries, the <CODE>ITCLDIR</CODE> variable
should be set to the location of the untar'd Itcl files.

 <P>
If you are using Ptolemy, then your path should be set:
<PRE>
set path = ($PTOLEMY/bin $PTOLEMY/bin.$PTARCH $path)
</PRE>

<H3><A NAME="Error Message about error while autoloading tk_setPalette">
Error Message about "error while autoloading tk_setPalette"
</A></H3>

If you see a message like:
<PRE>
error while autoloading "tk_setPalette": bad option "join": should be
atime, dirname, executable, exists, extension, isdirectory,
isfile, lstat, mtime, owned, readable, readlink, root, size,
stat, tail, type, or writable
	
    invoked from within
"tk_setPalette activeBackground #e6ceb1 activeForeground black \
background #ffe4c4 disabledForeground #b0b0b0 foreground black \
highlightBackground ..."
</PRE>

then you are probably running Itcl2.0, but the <CODE>tclIndex</CODE>
files were prepared with Itcl2.1 or later.  Tycho0.2 will not work
with Itcl2.0, you must upgrade to Itcl2.2 or later.  See the <A
HREF="install.html">Installation guide</A> for more information.


<H3><A NAME="CircularList error message">CircularList error message</A></H3>
<PRE>
Unable to load Tycho.tcl startup file: invalid command name "CircularList"
</PRE>
Probably the <CODE>$TYCHO/kernel/tclIndex</CODE>
file is corrupt, try
recreating it by <CODE>cd</CODE>ing to that directory and 
typing <CODE>make</CODE>.

<H3><A NAME="file join error message">file join error message</A></H3>
If you are starting up Tycho0.1.1 or later and you see a message about
<PRE>
 bad option "join": should be atime, dirname, executable, 
    exists, extension, isdirectory, isfile, lstat, mtime, owned, readable, 
    readlink, root, size, stat, tail, type, or writable
        while executing
    "file join $tycho kernel"
        invoked from within
</PRE>

then the problem is that you are running an
Itcl2.0 <CODE>itkwish</CODE>, and Tycho0.2 requires Itcl2.2, which
includes the Tcl7.6 <CODE>file join</CODE> command.  The way to tell
is to start <CODE>itkwish</CODE> by hand and type

<PRE>
set itcl::version
</PRE>
you should get back <CODE>2.2</CODE> if you are running Itcl2.2.

<H3><A NAME="Problems creating indices">Problems creating indices</A></H3>
The <A HREF="../kernel/doc/usersGuides/BuilderDialogHelp.html">BuilderDialog</a>
can be used to create Tycho indices, to create the indices by hand, follow the steps below.

<OL>

<LI> Do
<PRE>
cd $TYCHO
make realclean
make install

</PRE>

<CODE>make realclean</CODE> removes the <CODE>tclIndex</CODE> files and
<CODE>doc/codeDoc/*</CODE>.

 <br><CODE>make install</CODE> creates the <CODE>tclIndex</CODE> files
and recreates the <CODE>doc/codeDoc/*</CODE>.  The
<CODE>doc/codeDoc/*</CODE> files get created once by
<CODE>tydoc</CODE>, then <CODE>$TYCHO/lib/idx/codeDoc.idx</CODE> gets
created, then the <CODE>tydoc</CODE> files get recreated so that they can use
<CODE>$TYCHO/lib/idx/codeDoc.idx</CODE>.

<LI> If that does not work, and you are using a private tree that has
links to a master Tycho tree, destroy your private tree and use
<CODE>tylndir</CODE>
to create a new one.  <CODE>tylndir</CODE> is documented in <A
HREF="coding/directories.html#tylndir and private trees"><CODE>$TYCHO/doc/coding/directories.html</CODE></A>

</OL>
<H3>Color problems under Windows</H3>
Under Itcl2.2 on Windows, some colors in bitmaps might be rendered
incorrectly.  An example of this is the parts of 
bitmap in the Tycho Welcome Window will be yellow instead grey.
 <P>One workaround is to use the Color Palette settings and change the
number of colors.  To get to this control panel, right click on the
background, select <CODE>Properties</CODE>, which will bring up the
<CODE>Display Properties</CODE> window.  In that window, select the 
<CODE>Settings</CODE> tab and then change the Color Palette setting.

<H3>Problems starting <CODE>tycho -java</CODE></H3>
See 
<A HREF="../java/tycho/doc/internals/tcljava.html#CLASSPATH">The TclJava Package</A>
documentation for hints about <CODE>CLASSPATH</CODE>

<H2><A NAME="debugging hints">Debugging hints</A></H2>

You can start Tycho by hand by starting up <A NAME="itkwish: starting
tycho"><CODE>itkwish</CODE></A> and then sourcing
<CODE>$TYCHO/kernel/Tycho.tcl</CODE>.

 <P>If the tcl variable <A NAME="tyDebug variable"><CODE>tyDebug</CODE></A>
is set to <CODE>1</CODE>, then <CODE>Tycho.tcl</CODE> will print out
status messages as it starts up.  Also, if <CODE>tyDebug</CODE> is set
to <CODE>1</CODE>, then Tycho will not automatically exit if there is
an error during startup.

 <P>The example below shows how it is possible to start up Tycho from
<CODE>itkwish</CODE>

<PRE>
cxh@watson 357% setenv TYCHO ~/pt/tycho
cxh@watson 358% cd $TYCHO/kernel
cxh@watson 359% itkwish
% set tyDebug 1
1
% source Tycho.tcl
TYCHO=/users/cxh/pt/tycho
Set auto_path
About to source FontManager.itcl
Sourced ErrorMessage.itcl
Handled preferences
Processed argv
About to create a TclConsole
% exit
cxh@watson 360% 
</PRE>

<p>
Up to: <A HREF="introduction.html">Tycho Introduction</A> -
Previous: <A HREF="install.html">Installation</A> -
<a href="index.html">Tycho Home Page</a><br>
<p>
<HR>
Copyright &#169 1996-%Q%, The Regents of the University of California.
All rights reserved.
<br>
Last updated: $Date$,
comments to: <author>tycho@eecs.berkeley.edu</author>
</body>
</html>
