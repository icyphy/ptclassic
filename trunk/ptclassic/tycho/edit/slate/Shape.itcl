##########################################################################
# @Version: $Id$
# @Author: H. John Reekie
#
# @Copyright (c) 1996 The Regents of the University of California.
# All rights reserved.
# 
# Permission is hereby granted, without written agreement and without
# license or royalty fees, to use, copy, modify, and distribute this
# software and its documentation for any purpose, provided that the above
# copyright notice and the following two paragraphs appear in all copies
# of this software.
# 
# IN NO EVENT SHALL THE UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY
# FOR DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES
# ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF
# THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE POSSIBILITY OF
# SUCH DAMAGE.
# 
# THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY WARRANTIES,
# INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
# MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE SOFTWARE
# PROVIDED HEREUNDER IS ON AN "AS IS" BASIS, AND THE UNIVERSITY OF
# CALIFORNIA HAS NO OBLIGATION TO PROVIDE MAINTENANCE, SUPPORT, UPDATES,
# ENHANCEMENTS, OR MODIFICATIONS.
#                                                         COPYRIGHTENDKEY
##########################################################################


#######################################################################
#### Shape
#
# The abstract superclass of the shape class hierarchy.
#
class ::tycho::Shape {
    inherit ::tycho::Uninstantiable

    ###################################################################
    ####                         public procs                      ####

    # Get one or more aspects of an item
    proc aspect {id canvas slate args}

    # Deform one or more aspects of an item
    proc deform {id canvas slate x y args}

    # Attach a set of grapples to an item
    proc grapple {id canvas slate interactor args}

    # Process a phase of an interaction sequence to deform an item
    proc interact {id canvas slate mode x y args}

    # Deform an aspect of a picture to absolute coordinates
    proc reshape {id canvas slate x y aspect}
}


#######################################################################
#### aspect
#
# Return the value of one or more aspects. Valid aspects in this
# class are "center."
#
body ::tycho::Shape::aspect {id canvas slate args} {
    set coords [$slate bbox $id]

    switch -exact [lindex $args 0] {
	"c" -
	"center" {
	    return [list \
		    [expr ([lindex $coords 0] + [lindex $coords 2]) / 2] \
		    [expr ([lindex $coords 1] + [lindex $coords 3]) / 2]]
	}
	default {
	    error "Invalid aspect [lindex $args 0] of $id"
	}
    }
}

#######################################################################
#### deform
#
# Flag an error.
#
body ::tycho::Shape::deform {id canvas slate x y args} {
    error "Abstract procedure"
}

#######################################################################
#### grapple
#
# Flag an error
#
body ::tycho::Shape::grapple {id canvas slate interactor args} {
    error "Abstract procedure"
}

#######################################################################
#### interact
#
# Flag an error
#
body ::tycho::Shape::interact {id canvas slate mode x y args} {
    error "Abstract procedure"
}

#######################################################################
#### reshape
#
# Flag an error
#
body ::tycho::Shape::reshape {id canvas slate x y aspect} {
    error "Abstract procedure"
}
